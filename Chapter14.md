## [미진행] 
2016 August 30 
14. 사용자 인터페이스를 처리할 때 좋은 코딩 습관
────────────────────────────────────────────────
1. 입력 값을 저장할 변수의 크기를 충분히 확보하라
- ‘아주 충분히 여유 있게’ 배열의 크기를 지정하자
- double형보다는 long double형을, int보다는 long int를 사용하자.
⦁ 자바의 GC(Garbage Collection)
 자바와 같이 가비지 컬렉션 (Garbage Collection) 을 자동으로 해주는 언어는 GC.가 더 이상 참조되지 않는 객체들의 메모리를 자동으로 회수합니다. 그래서 자칫하면 우리가 메모리 관리를 고려하지 않아도 된다는 생각을 가질 수 있으나, 그것은 사실이 아니다.

⦁ 메모리 누출 (Memory Leak)
- 객체에 대한 참조 값(null 이 아닌) 을 가지고 있지만, 다시는 사용되지 않을 참조가 자주 발생

1. 프로그래머가 자신의 메모리를 스스로 관리하려하기 때문.
- 특정 요소가 더 이상 사용이 되지 않는 것이 확실하다면 해당 객체 참조를 반드시 null 값으로 변경하는 것이 좋습니다.
2. 캐시의 사용
- 객체 참조를 캐시에 저장하면 저장한 것을 잊어버리고 객체가 더 이상 필요 없을 때에도 캐시에 내버려두기 쉽습니다.
- 쉬운 해결책은 캐시 외부에 캐시의 키(key)에 대한 참조가 있을 동안만 유효한 캐시를 구현하는 것인데, WeakHashMap 를 사용하면 쉽습니다.
- 새 항목을 캐시에 추가할 때 확인하여 null 처리해주는 것이 좋습니다.
3. 콜백과 리스너
- 클라이언트가 콜백을 등록은 하고 말소를 하지 않는다면, 콜백은 계속 누적됩니다.
- 이 역시 쉬운 해결책은 약한 참조 ( Week Reference )인 WeakHashMap 을 사용하는 것입니다.

일반적으로 Memory Leak 은 잘 드러나지 않으므로 오랫동안 시스템에 남아있기 쉽습니다.  코드를 철저하게 검사하거나, 힙 프로파일러( Heap Profiler ) 와 같은 디버깅 tool 의 도움을 받아야만 원인을 찾을 수 있죠. 따라서 미리 예방하는 것이 최선책입니다.

────────────────────────────────────────────────
2. 변환 지정자와 매개변수의 개수를 일치시켜라
- 
변환 지정자
매개변수 목록
printf(“%d와 %d를 인쇄”, num1, num2);



⦁ (JAVA) 생성자의 매개변수가 많을 때 빌더 사용을 고려하자
 Static Factory Method 와 생성자는 선택 가능한 매개변수가 많아질 경우 신축성 있게 처리하지 못한다는 문제가 있다.

해결책 1 : 텔레스코핑 생성자( Telescoping Constructor )
- 매개변수 수를 달리하는 생성자들을 여러개 만들어 this( a, b, defaultValue ) 이런 식으로 호출된 생성자안에서 다른 생성자를 호출하며 전달받은 값에 default 값을 추가로 전달하는 방식. 매개변수의 수가 증가하면 무척 번거로워 진다는 단점이 있다.
해결책 2 : 자바빈즈 패턴 (Java Beans Pattern)
- 각 parameter 값에 해당하는 setter 를 미리 만들어 두어 생성자를 이용해 객체를 생성한 후에, setter methods 를 이용하여 값을 지정해준다. 여러 번의 메소드 호출로 나누어져 인스턴스가 완성되므로, 생성과정을 거치는 동안 객체가 일관된 상태를 유지하지 못하는 경우가 발생하기 쉽다.
해결책 3 : Builder 패턴 ( Telescoping Constructor 의 안정성과 Java Beans Pattern 의 가독성을 결합 )
- 원하는 객체를 바로 생성하는 대신, 필수 매개변수들를 parameter로 받는 builder의 constructor를 호출하여 빌더 객체를 얻는 방식  생성객체를 불변으로 만들 수 있고, 코드 작성이 쉬우며, 가독성이 좋습니다.　별도의 setter메소드들을 사용하므로,  여러 개의 가변인자 매개변수를 가지는 효과를 낼 수 있으며 유연성이 좋다.

결론:　생성자나 static 팩토리 메소드에서 많은 매개변수를 갖게 되는 클래스를 설계할 때는 필더 패턴이 좋은 선택이다.



3. scanf()함수보다는 fgets()와 sscanf()함수를 사용하라
- scanf()함수의 경우 문자열 중간에 공백 문자나 특수 문자가 있는 경우  거기까지만 읽어 들인다.
- 해결책: fgets()함수로 특수 및 공백문자를 포함하여 전체를 읽어 들여 sscanf()함수로 읽어 들여 변수에 저장하면 된다.

────────────────────────────────────────────────

4. fflush()함수를 사용해 표준 입출력 장치의 버퍼를 비워라
- 런타임 오류 시 표준 입출력 장치의 버퍼가 비워지지 않은 채 종료될 수 있다.

#include<stdio.h>
int main(void) {
	int data_in2;
	
	fflush(stdin); // 표준입력장치(키보드)의 버퍼를 강제로 비운다

	scanf(“숫자를 입력하세요: %d”,&data_in2);
	printf(“입력한 숫자는 %d입니다.”, data_in2);
	return 0;
}

#include<stdio.h>
int main(void) {
	int num1 = 1;
	int num2 = 0;
	int data_in;
	scanf(“숫자를 입력하세요: %d”, &data_in);
	num1 = num1 / num2;
	return 0;
}
#include<stdio.h>
int main(void) {
	int data_in2;
	scanf(“숫자를 입력하세요: %d”,&data_in2);
	printf(“입력한 숫자는 %d입니다.”, data_in2);
	return 0;
}
키보드에 입력한 정보가 data_in으로 전송할 차례에 프로그램 종료
다음 프로그램에 키보드 버퍼에 있던 값이 합쳐서 출력될 수 있다.
  
